!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(){var e="<Query><Where><DateRangesOverlap><FieldRef Name='EventDate' /><FieldRef Name='EndDate' /><Value Type='DateTime'><Now /></Value></DateRangesOverlap></Where><OrderBy><FieldRef Name='EventDate' Ascending='True' /></OrderBy></Query>",t="<ViewFields><FieldRef Name='ID' /><FieldRef Name='Title' /><FieldRef Name='Category' /><FieldRef Name='Description' /><FieldRef Name='EventDate' /><FieldRef Name='EndDate' /><FieldRef Name='FileRef' /><FieldRef Name='fRecurrence' /><FieldRef Name='fAllDayEvent' /></ViewFields>",n="<QueryOptions><RecurrencePatternXMLVersion>v3</RecurrencePatternXMLVersion><ExpandRecurrence>TRUE</ExpandRecurrence></QueryOptions>",a=new o.SPServicesJsonQuery({listName:"Events",CAMLQuery:e,CAMLViewFields:t,CAMLQueryOptions:n,CAMLRowLimit:"1000",debug:!0});a.getData(r)}function r(e){for(var t=0,n=e.length;t<n;t++){var a=e[t];s.addEvent(a.Title,a.Catagory,a.Description,a.EventDate,a.EndDate,moment(a.EventDate).format("MMM Do, YYYY"),a.RecurrenceID,a.fAllDayEvent,a.FileRef,a.ID),s.addSpecialDate(a.EventDate,a.Title)}var r=new Date,o=r.getMonth(),l=r.getFullYear();s.updateMonthEvents(o,l),i()}function i(){function e(e){s.updateMonthEvents(e.getMonth(),e.getFullYear())}var t=document.getElementsByClassName("calendar_loader")[0];t.style.display="none";var n=jQuery("input").glDatePicker({showAlways:!0,cssName:"custom",specialDates:s.specialDates,onCalendarRefresh:e}).glDatePicker()}var o=n(1),s=new o.CalendarViewModel;jQuery(document).ready(function(){SP.SOD.executeFunc("sp.js","SP.ClientContext",a),ko.applyBindings(s,document.getElementById("calendar-info"))})},function(e,t){"use strict";var n=function(){function e(){this.specialDates=[],this.calendarEvents=[],this.monthEvents=ko.observableArray([])}return e.prototype.addEvent=function(e,t,n,a,r,i,o,s,l,c){this.calendarEvents.push({Title:e,Category:t,Description:n,StartDate:a,EndDate:r,FormatedDate:i,RecurrenceID:Date,IsAllDayEvent:s,LinkUrl:l,itemID:c})},e.prototype.updateMonthEvents=function(e,t){this.monthEvents.removeAll();for(var n=0,a=this.calendarEvents.length;n<a;n++)this.calendarEvents[n].StartDate.getMonth()===e&&this.calendarEvents[n].StartDate.getFullYear()===t&&this.monthEvents.push(this.calendarEvents[n])},e.prototype.addSpecialDate=function(e,t){this.specialDates.push({date:e,data:t,repeatMonth:!1})},e.prototype.openPopup=function(e){console.log(e),SP.UI.ModalDialog.showModalDialog({title:"ababa",url:e.LinkUrl.lookupValue})},e}();t.CalendarViewModel=n;var a=function(){function e(e){this.settings=e}return e.prototype.getData=function(e){var t=jQuery().SPServices.SPGetListItemsJson(this.settings);jQuery.when(t).done(function(){e(this.data)}).fail(function(e){console.log("The SPServicesJsonQuery on: "+this.listName+" list failed.\n"+e)})},e}();t.SPServicesJsonQuery=a}]);
//# sourceMappingURL=calendar.min.js.map